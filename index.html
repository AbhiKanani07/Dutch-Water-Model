<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Water Use in the Netherlands</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      body {
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
          sans-serif;
        margin: 0;
        padding: 0;
        background: #f5f7fb;
        color: #222;
      }

      header {
        background: #0052a5;
        color: #fff;
        padding: 1.5rem 1rem;
        text-align: center;
      }

      header h1 {
        margin: 0 0 0.25rem;
        font-size: 1.8rem;
      }

      header p {
        margin: 0;
        font-size: 0.95rem;
        opacity: 0.9;
      }

      main {
        max-width: 960px;
        margin: 2rem auto;
        padding: 0 1rem 3rem;
      }

      section {
        margin-bottom: 2.5rem;
      }

      h2 {
        font-size: 1.4rem;
        margin-bottom: 0.5rem;
        color: #003366;
      }

      p {
        line-height: 1.5;
        font-size: 0.95rem;
      }

      .plot {
        background: #fff;
        border-radius: 8px;
        padding: 1rem 1rem 1.5rem;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.06);
        margin-top: 1rem;
      }

      .plot img {
        display: block;
        max-width: 100%;
        height: auto;
        border-radius: 4px;
      }

      .caption {
        font-size: 0.85rem;
        color: #555;
        margin-top: 0.5rem;
      }

      footer {
        text-align: center;
        padding: 1rem;
        font-size: 0.8rem;
        color: #777;
      }

      .interactive {
        background: #fff;
        border-radius: 10px;
        padding: 1rem 1rem 1.25rem;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        margin-top: 1rem;
      }

      .controls {
        display: grid;
        gap: 0.75rem;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        align-items: center;
        margin-bottom: 1rem;
      }

      .controls label {
        font-size: 0.9rem;
        color: #003366;
        display: flex;
        flex-direction: column;
        gap: 0.35rem;
      }

      .controls input[type="range"] {
        width: 100%;
      }

      .controls select,
      .controls button {
        padding: 0.5rem 0.6rem;
        border-radius: 6px;
        border: 1px solid #cfd8e3;
        font-size: 0.95rem;
      }

      .controls button {
        background: #0052a5;
        color: #fff;
        border: none;
        cursor: pointer;
      }

      .controls button:hover {
        background: #003f82;
      }

      .status {
        font-size: 0.9rem;
        color: #444;
      }

      .chart-area {
        margin-bottom: 1rem;
      }

      .bar-row {
        display: grid;
        grid-template-columns: 70px 1fr 80px;
        gap: 0.6rem;
        align-items: center;
        margin-bottom: 0.35rem;
      }

      .bar-track {
        background: #e5edf7;
        border-radius: 6px;
        height: 14px;
        overflow: hidden;
      }

      .bar-fill {
        height: 100%;
        background: linear-gradient(90deg, #2f80ed, #56ccf2);
      }

      .summary {
        font-size: 0.9rem;
        color: #333;
        margin-bottom: 0.5rem;
      }

      .table-container {
        overflow-x: auto;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        font-size: 0.9rem;
      }

      th,
      td {
        padding: 0.55rem 0.6rem;
        border-bottom: 1px solid #e5e8ef;
        text-align: left;
      }

      th {
        background: #f6f8fb;
        color: #003366;
      }
    </style>
    <script src="app.js" defer></script>
  </head>
  <body>
    <header>
      <h1>Water Use in the Netherlands</h1>
      <p>Analysis with Python, NumPy, Pandas, and Matplotlib</p>
    </header>

    <main>
      <section>
        <h2>About this project</h2>
        <p>
          This project explores water use in the Dutch economy using official
          statistics. The Python script loads raw CSV data, cleans and
          aggregates it with Pandas and NumPy, and generates visual summaries
          with Matplotlib and Seaborn. The plots below are saved by
          <code>main.py</code> into the <code>plots/</code> folder and embedded
          here.
        </p>
        <div class="interactive" style="margin-top:1rem;">
          <h3>Run the analysis yourself (local only)</h3>
          <p>
            These stats and forecasts are generated by a local Python script. To reproduce or update them:
          </p>
          <ol>
            <li>Download <a href="main.py" download>main.py</a> to the same folder as this page.</li>
            <li>Install Python 3 (with “Add to PATH”), then run:<br /><code>python -m pip install pandas numpy matplotlib seaborn requests</code></li>
            <li>In the folder containing <code>main.py</code> and your CSV, run:<br /><code>python main.py</code></li>
            <li>Enter how many years ahead to forecast when prompted.</li>
            <li>Refresh this page; it will read the new <code>plots/*.png</code> and <code>plots/forecast_total_economy.csv</code>.</li>
          </ol>
          <p>
            Note: GitHub Pages cannot execute Python. You must run <code>main.py</code> locally to regenerate data/plots.
          </p>
        </div>
      </section>

      <section>
        <h2>Forecast: water use by source (Total Dutch economy)</h2>
        <p>
          A simple linear-trend model trained on historical totals projects tap, groundwater, and surface water use for future years.
          Run <code>main.py</code> and enter how many years ahead to forecast; the plot below updates and is saved in <code>plots/</code>.
        </p>
        <p><strong>Download script:</strong> <a href="main.py" download>main.py</a> (run locally to regenerate forecasts)</p>
        <div class="plot">
          <img
            src="plots/forecast_total_economy.png"
            alt="Forecasted water use by source"
          />
          <div class="caption">
            Figure 0 &mdash; Forecasted water abstraction by source (dashed = forecast).
          </div>
        </div>
      </section>

      <section>
        <h2>Interactive forecast explorer</h2>
        <p>
          Explore the forecasted water use by source (tap, groundwater, surface) for the total Dutch economy.
          This widget reads <code>plots/forecast_total_economy.csv</code> produced by <code>main.py</code>.
          Adjust filters to change the view; if the data is missing, rerun the script locally and push the updated CSV/plots to GitHub Pages.
        </p>
        <div class="interactive" id="forecast-widget">
          <div class="status" id="forecast-status">Loading forecast data…</div>
          <div class="controls" aria-label="Forecast controls">
            <label>
              Source
              <select id="source-select" disabled></select>
            </label>
            <label>
              Max year: <span id="year-value">-</span>
              <input type="range" id="year-range" min="0" max="0" value="0" disabled />
            </label>
            <label>
              <span>Download CSV (forecast)</span>
              <a id="download-forecast" href="plots/forecast_total_economy.csv" download>plots/forecast_total_economy.csv</a>
            </label>
            <div>
              <button id="reset-filters" disabled>Reset filters</button>
            </div>
          </div>
          <div class="summary" id="summary"></div>
          <div class="chart-area" id="chart-area"></div>
          <div class="table-container" id="table-container"></div>
        </div>
      </section>

      <section>
        <h2>Water use by source (Total Dutch economy)</h2>
        <p>
          Evolution of tap water, groundwater, and surface water use (million
          m<sup>3</sup>) for the total Dutch economy over time.
        </p>
        <div class="plot">
          <img
            src="plots/water_trends.png"
            alt="Water use by source - Total Dutch economy"
          />
          <div class="caption">
            Figure 1 &mdash; Trends in water abstraction by source.
          </div>
        </div>
      </section>

      <section>
        <h2>Households vs all economic activities</h2>
        <p>
          Comparison of total water abstraction for private households versus
          all economic activities (A&ndash;U) in the Netherlands.
        </p>
        <div class="plot">
          <img
            src="plots/households_vs_activities.png"
            alt="Households vs all economic activities"
          />
          <div class="caption">
            Figure 2 &mdash; Water use for households compared with all
            activities.
          </div>
        </div>
      </section>

      <section>
        <h2>Fresh vs salt surface water</h2>
        <p>
          Use of fresh and salt surface water by the total Dutch economy,
          highlighting the relative importance of each source.
        </p>
        <div class="plot">
          <img
            src="plots/fresh_vs_salt_surface.png"
            alt="Fresh vs salt surface water"
          />
          <div class="caption">
            Figure 3 &mdash; Fresh versus salt surface water use.
          </div>
        </div>
      </section>
    </main>

    <footer>
      Data sources: CBS, EEA, OECD (Netherlands). Plots generated with
      Python/Matplotlib.
    </footer>
  </body>
  </html>
